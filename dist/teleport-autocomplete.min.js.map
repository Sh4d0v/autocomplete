{"version":3,"sources":["teleport-autocomplete.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","TeleportAutocomplete","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","_dereq_","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_halfred","_halfred2","_minivents","_minivents2","_coreJsLibraryFnObjectAssign","_coreJsLibraryFnObjectAssign2","_coreJsLibraryFnArrayFind","_coreJsLibraryFnArrayFind2","_coreJsLibraryFnRegexpEscape","_coreJsLibraryFnRegexpEscape2","_debounce","_debounce2","Key","BACK","TAB","ENTER","UP","DOWN","CONTAINER_TEMPLATE","INPUT_CLASS","itemWrapperTemplate","item","NO_RESULTS_TEMPLATE","GEOLOCATE_TEMPLATE","ITEM_TEMPLATE","wrapMatches","title","HTMLElement","on","addEventListener","off","removeEventListener","_this","_ref","arguments","undefined","_ref$el","el","_ref$maxItems","maxItems","_ref$itemTemplate","itemTemplate","_ref$geoLocate","geoLocate","_ref$apiRoot","apiRoot","_ref$apiVersion","apiVersion","_ref$embeds","embeds","elem","document","querySelector","setupInput","results","_activeIndex","_cache","_query","query","fetchResults","getResultByTitle","emit","getCities","get","set","index","oldNode","list","childNodes","classList","remove","activeNode","add","toggle","container","oninput","onkeydown","onfocus","onblur","onclick","containerParent","parentNode","replaceChild","removeChild","selectByIndex","HTMLInputElement","insertAdjacentHTML","previousSibling","firstChild","input","insertBefore","bind","onlistclick","event","indexOf","children","closest","select","renderList","innerHTML","_this2","keyCode","preventDefault","clear","activeIndex","Math","max","min","oldValue","isGeolocate","contains","currentLocation","str","res","split","filter","qr","forEach","matcher","RegExp","replace","_this3","_ref2","_ref2$geoLocate","map","slice","join","_this4","cb","req","abort","cached","loading","_this5","XMLHttpRequest","embed","oldPlaceholder","placeholder","navigator","geolocation","getCurrentPosition","_ref3","coords","open","latitude","longitude","setRequestHeader","parseLocation","JSON","parse","response","send","_ref4","message","setTimeout","timeout","json","nearest","embeddedArray","parseCity","focus","_this6","city","embedded","country","admin1_division","timezone","urban_area","fullName","full_name","name","geonameId","geoname_id","population","_city$location$latlon","location","latlon","_res$matching_full_name","matching_full_name","result","_city$admin1_division","admin1Division","admin1DivisionCode","geonames_admin1_code","tzNow","tzOffsetMinutes","total_offset_min","_city$urban_area","uaSlug","slug","uaName","uaId","ua_id","uaCityUrl","teleport_city_url","options","opt","classlist-polyfill","core-js/library/fn/array/find","core-js/library/fn/object/assign","core-js/library/fn/regexp/escape","debounce","element-closest","halfred","minivents","2","createElement","createElementNS","testElement","createMethod","method","original","DOMTokenList","token","len","_toggle","force","view","classListProp","protoProp","elemCtrProto","Element","objCtr","strTrim","String","trim","arrIndexOf","Array","DOMEx","type","DOMException","checkTokenAndGetIndex","test","ClassList","trimmedClasses","getAttribute","classes","push","_updateClassName","setAttribute","toString","classListProto","classListGetter","tokens","updated","splice","classListPropDesc","ex","number","__defineGetter__","3","find","../../modules/$.core","../../modules/es6.array.find","4","assign","../../modules/es6.object.assign","5","escape","../../modules/es7.regexp.escape","6","it","7","8","ctx","IObject","toObject","toLength","asc","TYPE","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","$this","callbackfn","that","val","O","./$.array-species-create","./$.ctx","./$.iobject","./$.to-length","./$.to-object","9","isObject","isArray","SPECIES","C","constructor","./$.is-array","./$.is-object","./$.wks","10","11","core","version","__e","12","aFunction","fn","b","c","apply","./$.a-function","13","14","PROTOTYPE","$export","source","own","out","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","P","IS_BIND","B","IS_WRAP","W","param","Function","./$.core","./$.global","15","exec","16","__g","17","cof","propertyIsEnumerable","./$.cof","18","arg","19","20","$Object","create","getProto","getPrototypeOf","isEnum","getDesc","getOwnPropertyDescriptor","setDesc","setDescs","getKeys","keys","getNames","getOwnPropertyNames","getSymbols","getOwnPropertySymbols","each","21","$","A","Symbol","K","k","T","$$","$$len","concat","j","./$","./$.fails","22","regExp","replacer","part","23","SHARED","store","24","ceil","floor","isNaN","25","toInteger","./$.to-integer","26","defined","./$.defined","27","id","px","random","28","uid","./$.shared","./$.uid","29","$find","KEY","forced","./$.add-to-unscopables","./$.array-methods","./$.export","30","./$.object-assign","31","$re","./$.replacer","32","now","Date","getTime","33","func","wait","immediate","later","last","timestamp","context","args","callNow","date-now","34","ELEMENT","matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","selector","element","parentElement","35","Parser","Resource","validationFlag","unparsed","enableValidation","flag","disableValidation","./lib/parser","./lib/resource","36","ImmutableStack","_array","array","isEmpty","pop","peek","37","_parse","validation","path","allLinkArrays","parseLinks","_links","curies","parseCuries","allEmbeddedArrays","parseEmbeddedResourcess","_embedded","resource","copyNonHalProperties","_original","links","parseHalProperty","parseLink","reportValidationIssue","linkArrays","parentValidation","identity","embeddedElement","childValidation","embeddedResource","property","processingFunction","copy","arrayfy","object","linkKey","link","shallowCopy","linkSpec","required","defaultValue","deprecation","log","pathToString","templated","href","console","substring","Stack","profile","hreflang","./immutable_stack","./resource","38","validationIssues","_initCuries","_validation","propertyArray","elementOfPropertyArray","_curiesMap","_curies","curie","_preResolveCuries","_resolvedCuriesMap","rel","_preResolveCurie","prefixAndReference","candidate","linkArray","hasCuries","curieArray","reverseResolveCurie","fullUrl","allEmbeddedResourceArrays","embeddedResourceArray","allLinks","allEmbeddedResources","39"],"mappings":"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","file":"teleport-autocomplete.min.js","sourcesContent":["/*! teleport-autocomplete - v0.3.2 | https://github.com/teleport/autocomplete#readme | MIT */\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.TeleportAutocomplete = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\n_dereq_('classlist-polyfill');\n\n_dereq_('element-closest');\n\nvar _halfred = _dereq_('halfred');\n\nvar _halfred2 = _interopRequireDefault(_halfred);\n\nvar _minivents = _dereq_('minivents');\n\nvar _minivents2 = _interopRequireDefault(_minivents);\n\nvar _coreJsLibraryFnObjectAssign = _dereq_('core-js/library/fn/object/assign');\n\nvar _coreJsLibraryFnObjectAssign2 = _interopRequireDefault(_coreJsLibraryFnObjectAssign);\n\nvar _coreJsLibraryFnArrayFind = _dereq_('core-js/library/fn/array/find');\n\nvar _coreJsLibraryFnArrayFind2 = _interopRequireDefault(_coreJsLibraryFnArrayFind);\n\nvar _coreJsLibraryFnRegexpEscape = _dereq_('core-js/library/fn/regexp/escape');\n\nvar _coreJsLibraryFnRegexpEscape2 = _interopRequireDefault(_coreJsLibraryFnRegexpEscape);\n\nvar _debounce = _dereq_('debounce');\n\nvar _debounce2 = _interopRequireDefault(_debounce);\n\nvar Key = { BACK: 8, TAB: 9, ENTER: 13, UP: 38, DOWN: 40 };\nvar CONTAINER_TEMPLATE = '<div class=\"tp-autocomplete\"><ul class=\"tp-ac__list\"></ul></div>';\nvar INPUT_CLASS = 'tp-ac__input';\nvar itemWrapperTemplate = function itemWrapperTemplate(item) {\n  return '<li class=\"tp-ac__item\">' + item + '</li>';\n};\nvar NO_RESULTS_TEMPLATE = '<li class=\"tp-ac__item no-results\">No matches</li>';\nvar GEOLOCATE_TEMPLATE = '<li class=\"tp-ac__item geolocate\">Detect my current location</li>';\n\n// Default item template, wraps title matches\nvar ITEM_TEMPLATE = function renderItem(item) {\n  return this.wrapMatches(item.title);\n};\n\n// Shorthands\nHTMLElement.prototype.on = HTMLElement.prototype.addEventListener;\nHTMLElement.prototype.off = HTMLElement.prototype.removeEventListener;\n\n/**\r\n * Teleport Cities Autocomplete\r\n */\n\nvar TeleportAutocomplete = (function () {\n  _createClass(TeleportAutocomplete, [{\n    key: 'query',\n    get: function get() {\n      return this._query;\n    },\n    set: function set(query) {\n      if (query === this._query) return query;\n\n      this._query = query;\n      this.el.value = query;\n      this.emit('querychange', query);\n    }\n  }, {\n    key: 'activeIndex',\n    get: function get() {\n      return this._activeIndex;\n    },\n    set: function set(index) {\n      // Remove old highlight\n      var oldNode = this.list.childNodes[this._activeIndex];\n      if (oldNode) oldNode.classList.remove('is-active');\n\n      this._activeIndex = index;\n\n      // Set highlight\n      var activeNode = this.list.childNodes[index];\n      if (activeNode) activeNode.classList.add('is-active');\n    }\n\n    // Show or hide loading\n  }, {\n    key: 'loading',\n    set: function set(toggle) {\n      this.container.classList.toggle('spinner', toggle);\n    }\n\n    /**\r\n     * Parse arguments and wrap input\r\n     */\n  }]);\n\n  function TeleportAutocomplete() {\n    var _this = this;\n\n    var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    var _ref$el = _ref.el;\n    var el = _ref$el === undefined ? null : _ref$el;\n    var value = _ref.value;\n    var _ref$maxItems = _ref.maxItems;\n    var maxItems = _ref$maxItems === undefined ? 10 : _ref$maxItems;\n    var _ref$itemTemplate = _ref.itemTemplate;\n    var itemTemplate = _ref$itemTemplate === undefined ? ITEM_TEMPLATE : _ref$itemTemplate;\n    var _ref$geoLocate = _ref.geoLocate;\n    var geoLocate = _ref$geoLocate === undefined ? true : _ref$geoLocate;\n    var _ref$apiRoot = _ref.apiRoot;\n    var apiRoot = _ref$apiRoot === undefined ? 'https://api.teleport.org/api' : _ref$apiRoot;\n    var _ref$apiVersion = _ref.apiVersion;\n    var apiVersion = _ref$apiVersion === undefined ? 1 : _ref$apiVersion;\n    var _ref$embeds = _ref.embeds;\n    var embeds = _ref$embeds === undefined ? 'city:country,city:admin1_division,city:timezone/tz:offsets-now,city:urban_area' : _ref$embeds;\n\n    _classCallCheck(this, TeleportAutocomplete);\n\n    (0, _minivents2['default'])(this);\n\n    var elem = typeof el === 'string' ? document.querySelector(el) : el;\n    this.setupInput(elem);\n\n    (0, _coreJsLibraryFnObjectAssign2['default'])(this, {\n      maxItems: maxItems, geoLocate: geoLocate, apiRoot: apiRoot, apiVersion: apiVersion, itemTemplate: itemTemplate, embeds: embeds, results: [],\n      _activeIndex: 0, _cache: {}, _query: this.el.value, value: value\n    });\n\n    // Prefetch results\n    if (this.value && this.value.title) {\n      this.query = this.value.title;\n    } else if (this.query) {\n      this.fetchResults(function () {\n        _this.value = _this.getResultByTitle(_this.query);\n        _this.emit('change', _this.value);\n      });\n    }\n\n    this.getCities = (0, _debounce2['default'])(this.getCities, 200);\n    return this;\n  }\n\n  /**\r\n   * Init shorthand\r\n   */\n\n  _createClass(TeleportAutocomplete, [{\n    key: 'destroy',\n\n    /**\r\n     * Clean up the container\r\n     */\n    value: function destroy() {\n      this.el.off('input', this.oninput);\n      this.el.off('keydown', this.onkeydown);\n      this.el.off('focus', this.onfocus);\n      this.el.off('blur', this.onblur);\n      this.el.off('click', this.onclick);\n\n      this.el.classList.remove(INPUT_CLASS);\n\n      var containerParent = this.container.parentNode;\n      containerParent.replaceChild(this.el.parentNode.removeChild(this.el), this.container);\n    }\n\n    /**\r\n     * Clear the selected value\r\n     */\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.results = [];\n      this.selectByIndex(0);\n    }\n\n    /**\r\n     * Wrap input node in container\r\n     */\n  }, {\n    key: 'setupInput',\n    value: function setupInput(el) {\n      if (!el || !(el instanceof HTMLInputElement)) throw new Error('Invalid element given');\n\n      el.insertAdjacentHTML('beforebegin', CONTAINER_TEMPLATE);\n      Object.defineProperty(this, 'container', { value: el.previousSibling });\n      Object.defineProperty(this, 'list', { value: this.container.firstChild });\n\n      var input = this.container.insertBefore(el.parentNode.removeChild(el), this.list);\n      input.classList.add(INPUT_CLASS);\n\n      Object.defineProperty(this, 'el', { enumerable: true, value: input });\n\n      this.el.on('input', this.oninput.bind(this));\n      this.el.on('keydown', this.onkeydown.bind(this));\n      this.el.on('focus', this.onfocus.bind(this));\n      this.el.on('blur', this.onblur.bind(this));\n      this.el.on('click', this.onclick.bind(this));\n\n      this.list.on('mousedown', this.onlistclick.bind(this));\n    }\n\n    /**\r\n     * Event handlers\r\n     */\n\n    // Clicked on list item, select item\n  }, {\n    key: 'onlistclick',\n    value: function onlistclick(event) {\n      var index = [].indexOf.call(this.list.children, event.target.closest('.tp-ac__item'));\n      this.selectByIndex(index);\n    }\n\n    // Select text on click\n  }, {\n    key: 'onclick',\n    value: function onclick() {\n      this.el.select();\n    }\n\n    // Input has focus, open list\n  }, {\n    key: 'onfocus',\n    value: function onfocus() {\n      this.renderList();\n    }\n\n    // Input lost focus, close list\n  }, {\n    key: 'onblur',\n    value: function onblur() {\n      this.list.innerHTML = '';\n    }\n\n    // Input was typed into\n  }, {\n    key: 'oninput',\n    value: function oninput() {\n      var _this2 = this;\n\n      this._query = this.el.value;\n      this.fetchResults(function () {\n        return _this2.renderList();\n      });\n    }\n\n    // Called on keypresses\n  }, {\n    key: 'onkeydown',\n    value: function onkeydown(event) {\n      var code = event.keyCode;\n\n      // Prevent cursor move\n      if ([Key.UP, Key.DOWN].indexOf(code) !== -1) event.preventDefault();\n\n      switch (code) {\n        case Key.BACK:\n          // Clear filled value or last char\n          if (this.value || this.query.length === 1) this.clear();\n          break;\n        case Key.ENTER:\n          // Prevent submit if query is to be selected\n          if (!this.value && this.query) event.preventDefault();\n          this.selectByIndex(this.activeIndex);\n          break;\n        case Key.TAB:\n          if (!this.value) this.selectByIndex(this.activeIndex);\n          break;\n        case Key.UP:\n          this.activeIndex = Math.max(0, this.activeIndex - 1);\n          break;\n        case Key.DOWN:\n          this.activeIndex = Math.min(this.results.length - 1, this.activeIndex + 1);\n          break;\n      }\n    }\n\n    // ---------------------------------------------------------------------------\n\n    /**\r\n     * Select option from list by index\r\n     */\n  }, {\n    key: 'selectByIndex',\n    value: function selectByIndex(index) {\n      this.activeIndex = index;\n      var oldValue = this.value;\n      this.value = this.results[index] || null;\n\n      var isGeolocate = this.list.firstChild && this.list.firstChild.classList.contains('geolocate');\n      if (isGeolocate) this.currentLocation();\n\n      if (oldValue !== this.value && !isGeolocate) this.emit('change', this.value);\n\n      this.list.innerHTML = '';\n      this.query = this.value ? this.value.title : '';\n    }\n\n    /**\r\n     * Wrap matching result names in <span>s\r\n     */\n  }, {\n    key: 'wrapMatches',\n    value: function wrapMatches() {\n      var str = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n\n      var res = str;\n\n      this.query.split(/[\\,\\s]+/).filter(function (qr) {\n        return !!qr;\n      }).forEach(function (query) {\n        var matcher = new RegExp((0, _coreJsLibraryFnRegexpEscape2['default'])(query) + '(?![^<]*>|[^<>]*<\\/)', 'gi');\n        res = res.replace(matcher, '<span>$&</span>');\n      });\n\n      return res;\n    }\n\n    /**\r\n     * Render result list\r\n     */\n  }, {\n    key: 'renderList',\n    value: function renderList() {\n      var _this3 = this;\n\n      var _ref2 = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      var _ref2$geoLocate = _ref2.geoLocate;\n      var geoLocate = _ref2$geoLocate === undefined ? this.geoLocate : _ref2$geoLocate;\n\n      var results = this.results.map(function (res) {\n        return itemWrapperTemplate(_this3.itemTemplate(res));\n      }).slice(0, this.maxItems).join('');\n\n      if (!results && this.query !== '' && !this.value) results = NO_RESULTS_TEMPLATE;\n      if (this.query === '' && geoLocate) results = GEOLOCATE_TEMPLATE;\n      this.list.innerHTML = results;\n\n      this.activeIndex = 0;\n    }\n\n    /**\r\n     * Fetch value from results by title\r\n     */\n  }, {\n    key: 'getResultByTitle',\n    value: function getResultByTitle(title) {\n      if (!this.results || !title) return null;\n      return (0, _coreJsLibraryFnArrayFind2['default'])(this.results, function (res) {\n        return res.title.indexOf(title) !== -1;\n      });\n    }\n\n    /**\r\n     * Fetch picker data from cache or API\r\n     */\n  }, {\n    key: 'fetchResults',\n    value: function fetchResults() {\n      var _this4 = this;\n\n      var cb = arguments.length <= 0 || arguments[0] === undefined ? function noop() {} : arguments[0];\n\n      // Cancel old request\n      if (this.req) this.req.abort();\n\n      var cached = this._cache[this.query];\n      if (cached) {\n        this.results = cached;\n        return cb();\n      }\n\n      this.req = this.getCities(function (results) {\n        _this4.results = _this4._cache[_this4.query] = results;\n        cb();\n        _this4.loading = false;\n      });\n\n      this.loading = true;\n    }\n\n    /**\r\n     * Geolocate current city\r\n     */\n  }, {\n    key: 'currentLocation',\n    value: function currentLocation() {\n      var _this5 = this;\n\n      var req = new XMLHttpRequest();\n      var embed = 'location:nearest-cities/location:nearest-city/' + (this.embeds ? '{' + this.embeds + '}' : '');\n\n      this.loading = true;\n      this.oldPlaceholder = this.el.placeholder;\n      this.el.placeholder = 'Detecting location...';\n\n      navigator.geolocation.getCurrentPosition(function (_ref3) {\n        var coords = _ref3.coords;\n\n        req.open('GET', _this5.apiRoot + '/locations/' + coords.latitude + ',' + coords.longitude + '/?embed=' + embed);\n        req.setRequestHeader('Accept', 'application/vnd.teleport.v' + _this5.apiVersion + '+json');\n        req.addEventListener('load', function () {\n          return _this5.parseLocation(JSON.parse(req.response));\n        });\n        req.send();\n      }, function (_ref4) {\n        var message = _ref4.message;\n\n        _this5.loading = false;\n        _this5.el.placeholder = message;\n        setTimeout(function () {\n          return _this5.el.placeholder = _this5.oldPlaceholder;\n        }, 3000);\n      }, { timeout: 5000 });\n    }\n\n    /**\r\n     * Parse current location API response\r\n     */\n  }, {\n    key: 'parseLocation',\n    value: function parseLocation(json) {\n      var res = _halfred2['default'].parse(json);\n      var nearest = res.embeddedArray('location:nearest-cities')[0];\n      if (nearest) {\n        this.results = [this.parseCity(nearest)];\n        if (this.geoLocate === 'nopick') {\n          this.el.focus();\n          this.renderList({ geoLocate: false });\n        } else {\n          this.selectByIndex(0);\n        }\n      }\n      this.loading = false;\n      this.el.placeholder = this.oldPlaceholder;\n    }\n\n    /**\r\n     * Make the API call\r\n     */\n  }, {\n    key: 'getCities',\n    value: function getCities(cb) {\n      var _this6 = this;\n\n      if (!this.query) return cb([]);\n      var embed = 'city:search-results/city:item/' + (this.embeds ? '{' + this.embeds + '}' : '');\n\n      var req = new XMLHttpRequest();\n      req.open('GET', this.apiRoot + '/cities/?search=' + this.query + '&embed=' + embed + '&limit=' + this.maxItems);\n      req.setRequestHeader('Accept', 'application/vnd.teleport.v' + this.apiVersion + '+json');\n      req.addEventListener('load', function () {\n        var results = _halfred2['default'].parse(JSON.parse(req.response)).embeddedArray('city:search-results').map(function (res) {\n          return _this6.parseCity(res);\n        });\n\n        cb(results);\n      });\n      req.send();\n\n      return req;\n    }\n\n    /**\r\n     * Parse city\r\n     */\n  }, {\n    key: 'parseCity',\n    value: function parseCity(res) {\n      var city = res.embedded('location:nearest-city') || res.embedded('city:item');\n      city.country = city.embedded('city:country');\n      city.admin1_division = city.embedded('city:admin1_division');\n      city.timezone = city.embedded('city:timezone');\n      city.urban_area = city.embedded('city:urban_area');\n\n      var fullName = city.full_name;\n      var name = city.name;\n      var geonameId = city.geoname_id;\n      var population = city.population;\n      var _city$location$latlon = city.location.latlon;\n      var latitude = _city$location$latlon.latitude;\n      var longitude = _city$location$latlon.longitude;\n      var _res$matching_full_name = res.matching_full_name;\n      var title = _res$matching_full_name === undefined ? fullName : _res$matching_full_name;\n\n      var result = { title: title, name: name, geonameId: geonameId, latitude: latitude, longitude: longitude, population: population };\n\n      if (city.country) (0, _coreJsLibraryFnObjectAssign2['default'])(result, { country: city.country.name });\n      if (city.admin1_division) {\n        var _city$admin1_division = city.admin1_division;\n        var admin1Division = _city$admin1_division.name;\n        var admin1DivisionCode = _city$admin1_division.geonames_admin1_code;\n\n        (0, _coreJsLibraryFnObjectAssign2['default'])(result, { admin1Division: admin1Division, admin1DivisionCode: admin1DivisionCode });\n      }\n\n      if (city.timezone) {\n        var tzNow = city.timezone.embedded('tz:offsets-now');\n        (0, _coreJsLibraryFnObjectAssign2['default'])(result, { tzOffsetMinutes: tzNow.total_offset_min });\n      }\n\n      if (city.urban_area) {\n        var _city$urban_area = city.urban_area;\n        var uaSlug = _city$urban_area.slug;\n        var uaName = _city$urban_area.name;\n        var uaId = _city$urban_area.ua_id;\n        var uaCityUrl = _city$urban_area.teleport_city_url;\n\n        (0, _coreJsLibraryFnObjectAssign2['default'])(result, { uaName: uaName, uaId: uaId, uaCityUrl: uaCityUrl, uaSlug: uaSlug });\n      }\n\n      return result;\n    }\n  }], [{\n    key: 'init',\n    value: function init(el) {\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var opt = typeof el === 'string' || el instanceof HTMLInputElement ? (0, _coreJsLibraryFnObjectAssign2['default'])(options, { el: el }) : el;\n      return new TeleportAutocomplete(opt);\n    }\n  }]);\n\n  return TeleportAutocomplete;\n})();\n\nexports['default'] = TeleportAutocomplete;\nmodule.exports = exports['default'];\n\n},{\"classlist-polyfill\":2,\"core-js/library/fn/array/find\":3,\"core-js/library/fn/object/assign\":4,\"core-js/library/fn/regexp/escape\":5,\"debounce\":33,\"element-closest\":34,\"halfred\":35,\"minivents\":39}],2:[function(_dereq_,module,exports){\n/*\n * classList.js: Cross-browser full element.classList implementation.\n * 2014-07-23\n *\n * By Eli Grey, http://eligrey.com\n * Public Domain.\n * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n */\n\n/*global self, document, DOMException */\n\n/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/\n\n/* Copied from MDN:\n * https://developer.mozilla.org/en-US/docs/Web/API/Element/classList\n */\n\nif (\"document\" in window.self) {\n\n  // Full polyfill for browsers with no classList support\n  // Including IE < Edge missing SVGElement.classList\n  if (!(\"classList\" in document.createElement(\"_\"))\n    || document.createElementNS && !(\"classList\" in document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\"))) {\n\n  (function (view) {\n\n    \"use strict\";\n\n    if (!('Element' in view)) return;\n\n    var\n        classListProp = \"classList\"\n      , protoProp = \"prototype\"\n      , elemCtrProto = view.Element[protoProp]\n      , objCtr = Object\n      , strTrim = String[protoProp].trim || function () {\n        return this.replace(/^\\s+|\\s+$/g, \"\");\n      }\n      , arrIndexOf = Array[protoProp].indexOf || function (item) {\n        var\n            i = 0\n          , len = this.length\n        ;\n        for (; i < len; i++) {\n          if (i in this && this[i] === item) {\n            return i;\n          }\n        }\n        return -1;\n      }\n      // Vendors: please allow content code to instantiate DOMExceptions\n      , DOMEx = function (type, message) {\n        this.name = type;\n        this.code = DOMException[type];\n        this.message = message;\n      }\n      , checkTokenAndGetIndex = function (classList, token) {\n        if (token === \"\") {\n          throw new DOMEx(\n              \"SYNTAX_ERR\"\n            , \"An invalid or illegal string was specified\"\n          );\n        }\n        if (/\\s/.test(token)) {\n          throw new DOMEx(\n              \"INVALID_CHARACTER_ERR\"\n            , \"String contains an invalid character\"\n          );\n        }\n        return arrIndexOf.call(classList, token);\n      }\n      , ClassList = function (elem) {\n        var\n            trimmedClasses = strTrim.call(elem.getAttribute(\"class\") || \"\")\n          , classes = trimmedClasses ? trimmedClasses.split(/\\s+/) : []\n          , i = 0\n          , len = classes.length\n        ;\n        for (; i < len; i++) {\n          this.push(classes[i]);\n        }\n        this._updateClassName = function () {\n          elem.setAttribute(\"class\", this.toString());\n        };\n      }\n      , classListProto = ClassList[protoProp] = []\n      , classListGetter = function () {\n        return new ClassList(this);\n      }\n    ;\n    // Most DOMException implementations don't allow calling DOMException's toString()\n    // on non-DOMExceptions. Error's toString() is sufficient here.\n    DOMEx[protoProp] = Error[protoProp];\n    classListProto.item = function (i) {\n      return this[i] || null;\n    };\n    classListProto.contains = function (token) {\n      token += \"\";\n      return checkTokenAndGetIndex(this, token) !== -1;\n    };\n    classListProto.add = function () {\n      var\n          tokens = arguments\n        , i = 0\n        , l = tokens.length\n        , token\n        , updated = false\n      ;\n      do {\n        token = tokens[i] + \"\";\n        if (checkTokenAndGetIndex(this, token) === -1) {\n          this.push(token);\n          updated = true;\n        }\n      }\n      while (++i < l);\n\n      if (updated) {\n        this._updateClassName();\n      }\n    };\n    classListProto.remove = function () {\n      var\n          tokens = arguments\n        , i = 0\n        , l = tokens.length\n        , token\n        , updated = false\n        , index\n      ;\n      do {\n        token = tokens[i] + \"\";\n        index = checkTokenAndGetIndex(this, token);\n        while (index !== -1) {\n          this.splice(index, 1);\n          updated = true;\n          index = checkTokenAndGetIndex(this, token);\n        }\n      }\n      while (++i < l);\n\n      if (updated) {\n        this._updateClassName();\n      }\n    };\n    classListProto.toggle = function (token, force) {\n      token += \"\";\n\n      var\n          result = this.contains(token)\n        , method = result ?\n          force !== true && \"remove\"\n        :\n          force !== false && \"add\"\n      ;\n\n      if (method) {\n        this[method](token);\n      }\n\n      if (force === true || force === false) {\n        return force;\n      } else {\n        return !result;\n      }\n    };\n    classListProto.toString = function () {\n      return this.join(\" \");\n    };\n\n    if (objCtr.defineProperty) {\n      var classListPropDesc = {\n          get: classListGetter\n        , enumerable: true\n        , configurable: true\n      };\n      try {\n        objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n      } catch (ex) { // IE 8 doesn't support enumerable:true\n        if (ex.number === -0x7FF5EC54) {\n          classListPropDesc.enumerable = false;\n          objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n        }\n      }\n    } else if (objCtr[protoProp].__defineGetter__) {\n      elemCtrProto.__defineGetter__(classListProp, classListGetter);\n    }\n\n    }(window.self));\n\n    } else {\n    // There is full or partial native classList support, so just check if we need\n    // to normalize the add/remove and toggle APIs.\n\n    (function () {\n      \"use strict\";\n\n      var testElement = document.createElement(\"_\");\n\n      testElement.classList.add(\"c1\", \"c2\");\n\n      // Polyfill for IE 10/11 and Firefox <26, where classList.add and\n      // classList.remove exist but support only one argument at a time.\n      if (!testElement.classList.contains(\"c2\")) {\n        var createMethod = function(method) {\n          var original = DOMTokenList.prototype[method];\n\n          DOMTokenList.prototype[method] = function(token) {\n            var i, len = arguments.length;\n\n            for (i = 0; i < len; i++) {\n              token = arguments[i];\n              original.call(this, token);\n            }\n          };\n        };\n        createMethod('add');\n        createMethod('remove');\n      }\n\n      testElement.classList.toggle(\"c3\", false);\n\n      // Polyfill for IE 10 and Firefox <24, where classList.toggle does not\n      // support the second argument.\n      if (testElement.classList.contains(\"c3\")) {\n        var _toggle = DOMTokenList.prototype.toggle;\n\n        DOMTokenList.prototype.toggle = function(token, force) {\n          if (1 in arguments && !this.contains(token) === !force) {\n            return force;\n          } else {\n            return _toggle.call(this, token);\n          }\n        };\n\n      }\n\n      testElement = null;\n    }());\n  }\n}\n\n},{}],3:[function(_dereq_,module,exports){\n_dereq_('../../modules/es6.array.find');\nmodule.exports = _dereq_('../../modules/$.core').Array.find;\n},{\"../../modules/$.core\":11,\"../../modules/es6.array.find\":29}],4:[function(_dereq_,module,exports){\n_dereq_('../../modules/es6.object.assign');\nmodule.exports = _dereq_('../../modules/$.core').Object.assign;\n},{\"../../modules/$.core\":11,\"../../modules/es6.object.assign\":30}],5:[function(_dereq_,module,exports){\n_dereq_('../../modules/es7.regexp.escape');\nmodule.exports = _dereq_('../../modules/$.core').RegExp.escape;\n},{\"../../modules/$.core\":11,\"../../modules/es7.regexp.escape\":31}],6:[function(_dereq_,module,exports){\nmodule.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n},{}],7:[function(_dereq_,module,exports){\nmodule.exports = function(){ /* empty */ };\n},{}],8:[function(_dereq_,module,exports){\n// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx      = _dereq_('./$.ctx')\n  , IObject  = _dereq_('./$.iobject')\n  , toObject = _dereq_('./$.to-object')\n  , toLength = _dereq_('./$.to-length')\n  , asc      = _dereq_('./$.array-species-create');\nmodule.exports = function(TYPE){\n  var IS_MAP        = TYPE == 1\n    , IS_FILTER     = TYPE == 2\n    , IS_SOME       = TYPE == 3\n    , IS_EVERY      = TYPE == 4\n    , IS_FIND_INDEX = TYPE == 6\n    , NO_HOLES      = TYPE == 5 || IS_FIND_INDEX;\n  return function($this, callbackfn, that){\n    var O      = toObject($this)\n      , self   = IObject(O)\n      , f      = ctx(callbackfn, that, 3)\n      , length = toLength(self.length)\n      , index  = 0\n      , result = IS_MAP ? asc($this, length) : IS_FILTER ? asc($this, 0) : undefined\n      , val, res;\n    for(;length > index; index++)if(NO_HOLES || index in self){\n      val = self[index];\n      res = f(val, index, O);\n      if(TYPE){\n        if(IS_MAP)result[index] = res;            // map\n        else if(res)switch(TYPE){\n          case 3: return true;                    // some\n          case 5: return val;                     // find\n          case 6: return index;                   // findIndex\n          case 2: result.push(val);               // filter\n        } else if(IS_EVERY)return false;          // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n},{\"./$.array-species-create\":9,\"./$.ctx\":12,\"./$.iobject\":17,\"./$.to-length\":25,\"./$.to-object\":26}],9:[function(_dereq_,module,exports){\n// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar isObject = _dereq_('./$.is-object')\n  , isArray  = _dereq_('./$.is-array')\n  , SPECIES  = _dereq_('./$.wks')('species');\nmodule.exports = function(original, length){\n  var C;\n  if(isArray(original)){\n    C = original.constructor;\n    // cross-realm fallback\n    if(typeof C == 'function' && (C === Array || isArray(C.prototype)))C = undefined;\n    if(isObject(C)){\n      C = C[SPECIES];\n      if(C === null)C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length);\n};\n},{\"./$.is-array\":18,\"./$.is-object\":19,\"./$.wks\":28}],10:[function(_dereq_,module,exports){\nvar toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n},{}],11:[function(_dereq_,module,exports){\nvar core = module.exports = {version: '1.2.6'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n},{}],12:[function(_dereq_,module,exports){\n// optional / simple context binding\nvar aFunction = _dereq_('./$.a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n},{\"./$.a-function\":6}],13:[function(_dereq_,module,exports){\n// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n},{}],14:[function(_dereq_,module,exports){\nvar global    = _dereq_('./$.global')\n  , core      = _dereq_('./$.core')\n  , ctx       = _dereq_('./$.ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && key in target;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(param){\n        return this instanceof C ? new C(param) : C(param);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;\n  }\n};\n// type bitmap\n$export.F = 1;  // forced\n$export.G = 2;  // global\n$export.S = 4;  // static\n$export.P = 8;  // proto\n$export.B = 16; // bind\n$export.W = 32; // wrap\nmodule.exports = $export;\n},{\"./$.core\":11,\"./$.ctx\":12,\"./$.global\":16}],15:[function(_dereq_,module,exports){\nmodule.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n},{}],16:[function(_dereq_,module,exports){\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n},{}],17:[function(_dereq_,module,exports){\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = _dereq_('./$.cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n},{\"./$.cof\":10}],18:[function(_dereq_,module,exports){\n// 7.2.2 IsArray(argument)\nvar cof = _dereq_('./$.cof');\nmodule.exports = Array.isArray || function(arg){\n  return cof(arg) == 'Array';\n};\n},{\"./$.cof\":10}],19:[function(_dereq_,module,exports){\nmodule.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n},{}],20:[function(_dereq_,module,exports){\nvar $Object = Object;\nmodule.exports = {\n  create:     $Object.create,\n  getProto:   $Object.getPrototypeOf,\n  isEnum:     {}.propertyIsEnumerable,\n  getDesc:    $Object.getOwnPropertyDescriptor,\n  setDesc:    $Object.defineProperty,\n  setDescs:   $Object.defineProperties,\n  getKeys:    $Object.keys,\n  getNames:   $Object.getOwnPropertyNames,\n  getSymbols: $Object.getOwnPropertySymbols,\n  each:       [].forEach\n};\n},{}],21:[function(_dereq_,module,exports){\n// 19.1.2.1 Object.assign(target, source, ...)\nvar $        = _dereq_('./$')\n  , toObject = _dereq_('./$.to-object')\n  , IObject  = _dereq_('./$.iobject');\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = _dereq_('./$.fails')(function(){\n  var a = Object.assign\n    , A = {}\n    , B = {}\n    , S = Symbol()\n    , K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function(k){ B[k] = k; });\n  return a({}, A)[S] != 7 || Object.keys(a({}, B)).join('') != K;\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n  var T     = toObject(target)\n    , $$    = arguments\n    , $$len = $$.length\n    , index = 1\n    , getKeys    = $.getKeys\n    , getSymbols = $.getSymbols\n    , isEnum     = $.isEnum;\n  while($$len > index){\n    var S      = IObject($$[index++])\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n      , length = keys.length\n      , j      = 0\n      , key;\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n  }\n  return T;\n} : Object.assign;\n},{\"./$\":20,\"./$.fails\":15,\"./$.iobject\":17,\"./$.to-object\":26}],22:[function(_dereq_,module,exports){\nmodule.exports = function(regExp, replace){\n  var replacer = replace === Object(replace) ? function(part){\n    return replace[part];\n  } : replace;\n  return function(it){\n    return String(it).replace(regExp, replacer);\n  };\n};\n},{}],23:[function(_dereq_,module,exports){\nvar global = _dereq_('./$.global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n},{\"./$.global\":16}],24:[function(_dereq_,module,exports){\n// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n},{}],25:[function(_dereq_,module,exports){\n// 7.1.15 ToLength\nvar toInteger = _dereq_('./$.to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n},{\"./$.to-integer\":24}],26:[function(_dereq_,module,exports){\n// 7.1.13 ToObject(argument)\nvar defined = _dereq_('./$.defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n},{\"./$.defined\":13}],27:[function(_dereq_,module,exports){\nvar id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n},{}],28:[function(_dereq_,module,exports){\nvar store  = _dereq_('./$.shared')('wks')\n  , uid    = _dereq_('./$.uid')\n  , Symbol = _dereq_('./$.global').Symbol;\nmodule.exports = function(name){\n  return store[name] || (store[name] =\n    Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));\n};\n},{\"./$.global\":16,\"./$.shared\":23,\"./$.uid\":27}],29:[function(_dereq_,module,exports){\n'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = _dereq_('./$.export')\n  , $find   = _dereq_('./$.array-methods')(5)\n  , KEY     = 'find'\n  , forced  = true;\n// Shouldn't skip holes\nif(KEY in [])Array(1)[KEY](function(){ forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn/*, that = undefined */){\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n_dereq_('./$.add-to-unscopables')(KEY);\n},{\"./$.add-to-unscopables\":7,\"./$.array-methods\":8,\"./$.export\":14}],30:[function(_dereq_,module,exports){\n// 19.1.3.1 Object.assign(target, source)\nvar $export = _dereq_('./$.export');\n\n$export($export.S + $export.F, 'Object', {assign: _dereq_('./$.object-assign')});\n},{\"./$.export\":14,\"./$.object-assign\":21}],31:[function(_dereq_,module,exports){\n// https://github.com/benjamingr/RexExp.escape\nvar $export = _dereq_('./$.export')\n  , $re     = _dereq_('./$.replacer')(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n\n$export($export.S, 'RegExp', {escape: function escape(it){ return $re(it); }});\n\n},{\"./$.export\":14,\"./$.replacer\":22}],32:[function(_dereq_,module,exports){\nmodule.exports = Date.now || now\n\nfunction now() {\n    return new Date().getTime()\n}\n\n},{}],33:[function(_dereq_,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar now = _dereq_('date-now');\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\n\nmodule.exports = function debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = now() - timestamp;\n\n    if (last < wait && last > 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      }\n    }\n  };\n\n  return function debounced() {\n    context = this;\n    args = arguments;\n    timestamp = now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n};\n\n},{\"date-now\":32}],34:[function(_dereq_,module,exports){\n(function (ELEMENT) {\n\tELEMENT.matches = ELEMENT.matches || ELEMENT.mozMatchesSelector || ELEMENT.msMatchesSelector || ELEMENT.oMatchesSelector || ELEMENT.webkitMatchesSelector;\n\n\tELEMENT.closest = ELEMENT.closest || function closest(selector) {\n\t\tvar element = this;\n\n\t\twhile (element) {\n\t\t\tif (element.matches(selector)) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\telement = element.parentElement;\n\t\t}\n\n\t\treturn element;\n\t};\n}(Element.prototype));\n\n},{}],35:[function(_dereq_,module,exports){\nvar Parser = _dereq_('./lib/parser')\n  , Resource = _dereq_('./lib/resource')\n  , validationFlag = false;\n\nmodule.exports = {\n\n  parse: function(unparsed) {\n    return new Parser().parse(unparsed, validationFlag);\n  },\n\n  enableValidation: function(flag) {\n    validationFlag = (flag != null) ? flag : true;\n  },\n\n  disableValidation: function() {\n    validationFlag = false;\n  },\n\n  Resource: Resource\n\n};\n\n},{\"./lib/parser\":37,\"./lib/resource\":38}],36:[function(_dereq_,module,exports){\n'use strict';\n\n/*\n * A very naive copy-on-write immutable stack. Since the size of the stack\n * is equal to the depth of the embedded resources for one HAL resource, the bad\n * performance for the copy-on-write approach is probably not a problem at all.\n * Might be replaced by a smarter solution later. Or not. Whatever.\n */\nfunction ImmutableStack() {\n  if (arguments.length >= 1) {\n    this._array = arguments[0];\n  } else {\n    this._array = [];\n  }\n}\n\nImmutableStack.prototype.array = function() {\n  return this._array;\n};\n\nImmutableStack.prototype.isEmpty = function(array) {\n  return this._array.length === 0;\n};\n\nImmutableStack.prototype.push = function(element) {\n  var array = this._array.slice(0);\n  array.push(element);\n  return new ImmutableStack(array);\n};\n\nImmutableStack.prototype.pop = function() {\n  var array = this._array.slice(0, this._array.length - 1);\n  return new ImmutableStack(array);\n};\n\nImmutableStack.prototype.peek = function() {\n  if (this.isEmpty()) {\n    throw new Error('can\\'t peek on empty stack');\n  }\n  return this._array[this._array.length - 1];\n};\n\nmodule.exports = ImmutableStack;\n\n},{}],37:[function(_dereq_,module,exports){\n'use strict';\n\nvar Resource = _dereq_('./resource')\n  , Stack = _dereq_('./immutable_stack');\n\nvar linkSpec = {\n  href: { required: true, defaultValue: null },\n  templated: { required: false, defaultValue: false },\n  type: { required: false, defaultValue: null },\n  deprecation: { required: false, defaultValue: null },\n  name: { required: false, defaultValue: null },\n  profile: { required: false, defaultValue: null },\n  title: { required: false, defaultValue: null },\n  hreflang: { required: false, defaultValue: null }\n};\n\nfunction Parser() {\n}\n\nParser.prototype.parse = function parse(unparsed, validationFlag) {\n  var validation = validationFlag ? [] : null;\n  return _parse(unparsed, validation, new Stack());\n};\n\nfunction _parse(unparsed, validation, path) {\n  if (unparsed == null) {\n    return unparsed;\n  }\n  var allLinkArrays = parseLinks(unparsed._links, validation,\n      path.push('_links'));\n  var curies = parseCuries(allLinkArrays);\n  var allEmbeddedArrays = parseEmbeddedResourcess(unparsed._embedded,\n      validation, path.push('_embedded'));\n  var resource = new Resource(allLinkArrays, curies, allEmbeddedArrays,\n      validation);\n  copyNonHalProperties(unparsed, resource);\n  resource._original = unparsed;\n  return resource;\n}\n\nfunction parseLinks(links, validation, path) {\n  links = parseHalProperty(links, parseLink, validation, path);\n  if (links == null || links.self == null) {\n    // No links at all? Then it implictly misses the self link which it SHOULD\n    // have according to spec\n    reportValidationIssue('Resource does not have a self link', validation,\n        path);\n  }\n  return links;\n}\n\nfunction parseCuries(linkArrays) {\n  if (linkArrays) {\n    return linkArrays.curies;\n  } else {\n    return [];\n  }\n}\n\nfunction parseEmbeddedResourcess(original, parentValidation, path) {\n  var embedded = parseHalProperty(original, identity, parentValidation, path);\n  if (embedded == null) {\n    return embedded;\n  }\n  Object.keys(embedded).forEach(function(key) {\n    embedded[key] = embedded[key].map(function(embeddedElement) {\n      var childValidation = parentValidation != null ? [] : null;\n      var embeddedResource = _parse(embeddedElement, childValidation,\n          path.push(key));\n      embeddedResource._original = embeddedElement;\n      return embeddedResource;\n    });\n  });\n  return embedded;\n}\n\n/*\n * Copy over non-hal properties (everything that is not _links or _embedded)\n * to the parsed resource.\n */\nfunction copyNonHalProperties(unparsed, resource) {\n  Object.keys(unparsed).forEach(function(key) {\n    if (key !== '_links' && key !== '_embedded') {\n      resource[key] = unparsed[key];\n    }\n  });\n}\n\n/*\n * Processes one of the two main hal properties, that is _links or _embedded.\n * Each sub-property is turned into a single element array if it isn't already\n * an array. processingFunction is applied to each array element.\n */\nfunction parseHalProperty(property, processingFunction, validation, path) {\n  if (property == null) {\n    return property;\n  }\n\n  // create a shallow copy of the _links/_embedded object\n  var copy = {};\n\n  // normalize each link/each embedded object and put it into our copy\n  Object.keys(property).forEach(function(key) {\n    copy[key] = arrayfy(key, property[key], processingFunction,\n        validation, path);\n  });\n  return copy;\n}\n\nfunction arrayfy(key, object, fn, validation, path) {\n  if (isArray(object)) {\n    return object.map(function(element) {\n      return fn(key, element, validation, path);\n    });\n  } else {\n    return [fn(key, object, validation, path)];\n  }\n}\n\n\nfunction parseLink(linkKey, link, validation, path) {\n  if (!isObject(link)) {\n    throw new Error('Link object is not an actual object: ' + link +\n      ' [' + typeof link + ']');\n  }\n\n  // create a shallow copy of the link object\n  var copy = shallowCopy(link);\n\n  // add missing properties mandated by spec and do generic validation\n  Object.keys(linkSpec).forEach(function(key) {\n    if (copy[key] == null) {\n      if (linkSpec[key].required) {\n        reportValidationIssue('Link misses required property ' + key + '.',\n            validation, path.push(linkKey));\n      }\n      if (linkSpec[key].defaultValue != null) {\n        copy[key] = linkSpec[key].defaultValue;\n      }\n    }\n  });\n\n  // check more inter-property relations mandated by spec\n  if (copy.deprecation) {\n    log('Warning: Link ' + pathToString(path.push(linkKey)) +\n        ' is deprecated, see ' + copy.deprecation);\n  }\n  if (copy.templated !== true && copy.templated !== false) {\n    copy.templated = false;\n  }\n\n  if (!validation) {\n    return copy;\n  }\n  if (copy.href && copy.href.indexOf('{') >= 0 && !copy.templated) {\n    reportValidationIssue('Link seems to be an URI template ' +\n        'but its \"templated\" property is not set to true.', validation,\n        path.push(linkKey));\n  }\n  return copy;\n}\n\nfunction isArray(o) {\n  return Object.prototype.toString.call(o) === '[object Array]';\n}\n\nfunction isObject(o) {\n  return typeof o === 'object';\n}\n\nfunction identity(key, object) {\n  return object;\n}\n\nfunction reportValidationIssue(message, validation, path) {\n  if (validation) {\n    validation.push({\n      path: pathToString(path),\n      message: message\n    });\n  }\n}\n\n// TODO fix this ad hoc mess - does ie support console.log as of ie9?\nfunction log(message) {\n  if (typeof console !== 'undefined' && typeof console.log === 'function') {\n    console.log(message);\n  }\n}\n\nfunction shallowCopy(source) {\n  var copy = {};\n  Object.keys(source).forEach(function(key) {\n    copy[key] = source[key];\n  });\n  return copy;\n}\n\nfunction pathToString(path) {\n  var s = '$.';\n  for (var i = 0; i < path.array().length; i++) {\n    s += path.array()[i] + '.';\n  }\n  s = s.substring(0, s.length - 1);\n  return s;\n}\n\nmodule.exports = Parser;\n\n},{\"./immutable_stack\":36,\"./resource\":38}],38:[function(_dereq_,module,exports){\n'use strict';\n\nfunction Resource(links, curies, embedded, validationIssues) {\n  var self = this;\n  this._links = links || {};\n  this._initCuries(curies);\n  this._embedded = embedded || {};\n  this._validation = validationIssues || [];\n}\n\nResource.prototype._initCuries = function(curies) {\n  this._curiesMap = {};\n  if (!curies) {\n    this._curies = [];\n  } else {\n    this._curies = curies;\n    for (var i = 0; i < this._curies.length; i++) {\n      var curie = this._curies[i];\n      this._curiesMap[curie.name] = curie;\n    }\n  }\n  this._preResolveCuries();\n};\n\nResource.prototype._preResolveCuries = function() {\n  this._resolvedCuriesMap = {};\n  for (var i = 0; i < this._curies.length; i++) {\n    var curie = this._curies[i];\n    if (!curie.name) {\n      continue;\n    }\n    for (var rel in this._links) {\n      if (rel !== 'curies') {\n        this._preResolveCurie(curie, rel);\n      }\n    }\n  }\n};\n\nResource.prototype._preResolveCurie = function(curie, rel) {\n  var link = this._links[rel];\n  var prefixAndReference = rel.split(/:(.+)/);\n  var candidate = prefixAndReference[0];\n  if (curie.name === candidate) {\n    if (curie.templated && prefixAndReference.length >= 1) {\n      // TODO resolving templated CURIES should use a small uri template\n      // lib, not coded here ad hoc\n      var href = curie.href.replace(/(.*){(.*)}(.*)/, '$1' +\n          prefixAndReference[1] + '$3');\n      this._resolvedCuriesMap[href] = rel;\n    } else {\n      this._resolvedCuriesMap[curie.href] = rel;\n    }\n  }\n};\n\nResource.prototype.allLinkArrays = function() {\n  return this._links;\n};\n\nResource.prototype.linkArray = function(key) {\n  return propertyArray(this._links, key);\n};\n\nResource.prototype.link = function(key, index) {\n  return elementOfPropertyArray(this._links, key, index);\n};\n\nResource.prototype.hasCuries = function(key) {\n  return this._curies.length > 0;\n};\n\nResource.prototype.curieArray = function(key) {\n  return this._curies;\n};\n\nResource.prototype.curie = function(name) {\n  return this._curiesMap[name];\n};\n\nResource.prototype.reverseResolveCurie = function(fullUrl) {\n  return this._resolvedCuriesMap[fullUrl];\n};\n\nResource.prototype.allEmbeddedResourceArrays = function () {\n  return this._embedded;\n};\n\nResource.prototype.embeddedResourceArray = function(key) {\n  return propertyArray(this._embedded, key);\n};\n\nResource.prototype.embeddedResource = function(key, index) {\n  return elementOfPropertyArray(this._embedded, key, index);\n};\n\nResource.prototype.original = function() {\n  return this._original;\n};\n\nfunction propertyArray(object, key) {\n  return object != null ? object[key] : null;\n}\n\nfunction elementOfPropertyArray(object, key, index) {\n  index = index || 0;\n  var array = propertyArray(object, key);\n  if (array != null && array.length >= 1) {\n    return array[index];\n  }\n  return null;\n}\n\nResource.prototype.validationIssues = function() {\n  return this._validation;\n};\n\n// alias definitions\nResource.prototype.allLinks = Resource.prototype.allLinkArrays;\nResource.prototype.allEmbeddedArrays =\n    Resource.prototype.allEmbeddedResources =\n    Resource.prototype.allEmbeddedResourceArrays;\nResource.prototype.embeddedArray = Resource.prototype.embeddedResourceArray;\nResource.prototype.embedded = Resource.prototype.embeddedResource;\nResource.prototype.validation = Resource.prototype.validationIssues;\n\nmodule.exports = Resource;\n\n},{}],39:[function(_dereq_,module,exports){\nmodule.exports=function(n){var t={},e=[];n=n||this,n.on=function(n,e,l){(t[n]=t[n]||[]).push([e,l])},n.off=function(n,l){n||(t={});for(var o=t[n]||e,i=o.length=l?o.length:0;i--;)l==o[i][0]&&o.splice(i,1)},n.emit=function(n){for(var l,o=t[n]||e,i=o.length>0?o.slice(0,o.length):o,c=0;l=i[c++];)l[0].apply(l[1],e.slice.call(arguments,1))}};\n},{}]},{},[1])(1)\n});\n\n//# sourceMappingURL=teleport-autocomplete.js.map\n"],"sourceRoot":".."}